# PBL_eshiritori
## 環境構築
pbl.ymlを用いてAnaconda上で環境構築を行うことができます。
```
conda env create -n env_name -f pbl.yml
```
env_nameのところに環境につけたい名前を入れます。指定しない場合は自動的にpblになります。
上のコマンドを入力しpyaudio辺りでエラーになる場合は
```
sudo apt-get install portaudio19-dev
```
でportaudioをインストールすると直る場合があります。

## 各ディレクトリの説明
+ scripts
    * プログラム本体を入れておく。
+ dic
    * この中に画像を蓄えておく。画像辞書。
+ output
    * ここにone_stroke_path.pyで生成したペン先の軌道点群などを出力する。
+ pictures
    * その内消す。

## 各ファイルの説明
### run_game.py（未完成）
このプログラムからターン数を指定してゲームを開始します。つまり
```
python run_game.py 5
```
と入力するとしりとりを５ターン分行い、５ターンが終了するまでに
1. プレイヤーが語尾に「ん」の単語を言う。
1. プレイヤーがすでに使用した単語を言う。
1. プログラム側が画像辞書に存在する適切な単語を使い果たし、単語を返せなくなる。

のいづれかの状況になるとそこでしりとりを終了します。また最後のターンまで上記の状況が発生しなかった場合は引き分けになります。
なお７以上のターン数は入力できません。(紙面的にキツイので...)
### voice_input.py
マイクからの音声をひらがなの文字列に変換します。無音やひらがなに変換できない単語は棄却して、再び録音を開始します。
```
python voice_input.py
```
で動かせます。
### one_stroke_path.py
pngなどの画像ファイルを読み込み、ペン先の軌道の点群配列を出力します。画像は必ずdicディレクトリの中に存在している必要があります。また生成したファイルはすべてoutputディレクトリに保存されます。

```
python one_stroke_path.py "file_name"
```
引数の"file_name"は絶対パスや相対パスでなくとも、ファイル名のみで動きます。

### ur3e_motion.py（未完成）
UR3eの制御プログラム。